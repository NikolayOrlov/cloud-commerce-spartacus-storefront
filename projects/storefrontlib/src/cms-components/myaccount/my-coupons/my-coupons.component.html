<div class="cx-section">
  <ng-container *ngIf="(couponResult$ | async) as couponResult">
    <ng-container *ngIf="(couponsStateLoading$ | async); else loading">
      <div class="cx-my-coupons-sort top row">
        <div
          class="cx-my-coupons-form-group form-group col-sm-12 col-md-4 col-lg-4"
        >
          <cx-sorting
            [sortOptions]="sortOptions"
            [sortLabels]="sortLabels"
            (sortListEvent)="sortChange($event)"
            [selectedOption]="sort"
            placeholder="{{ 'coupons.sortByMostRecent' | cxTranslate }}"
          >
          </cx-sorting>
        </div>
        <div class="cx-my-coupons-pagination">
          <cx-pagination
            [pagination]="pagination"
            (viewPageEvent)="pageChange($event)"
          ></cx-pagination>
        </div>
      </div>

      <div class="row cx-coupon-deck">
        <div
          *ngFor="let coupon of couponResult.coupons"
          class="col-md-6 cx-coupon-card"
        >
          <cx-coupon-card [coupon]="coupon"></cx-coupon-card>
        </div>
      </div>

      <div class="cx-my-coupons-sort bottom row">
        <div
          class="cx-my-coupons-form-group form-group col-sm-12 col-md-4 col-lg-4"
        >
          <cx-sorting
            [sortOptions]="sortOptions"
            [sortLabels]="sortLabels"
            (sortListEvent)="sortChange($event)"
            [selectedOption]="sort"
            placeholder="{{ 'myInterests.sortByMostRecent' | cxTranslate }}"
          >
          </cx-sorting>
        </div>
        <div class="cx-my-coupons-pagination">
          <cx-pagination
            [pagination]="pagination"
            (viewPageEvent)="pageChange($event)"
          ></cx-pagination>
        </div>
      </div>
    </ng-container>

    <ng-container *ngIf="!couponResult.coupons">
      <section>
        <p class="cx-section-msg">
          You have no coupons available
        </p>
      </section>
    </ng-container>

    <ng-template #loading>
      <div class="col-md-12 cx-address-spinner">
        <cx-spinner></cx-spinner>
      </div>
    </ng-template>
  </ng-container>
</div>
